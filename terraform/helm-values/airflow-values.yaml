# Airflow Helm Chart Values (compatible subset for chart v1.11.0)
global:
  storageClass: gp2

# Executor
executor: LocalExecutor

# Airflow configuration (structured per chart schema)
config:
  core:
    dags_folder: /opt/airflow/dags
    executor: '{{ .Values.executor }}'
    load_examples: 'False'
  logging:
    base_log_folder: /opt/airflow/logs
    dag_processor_manager_log_folder: /opt/airflow/logs
  database:
    load_default_connections: true

# Webserver (UI) configuration
webserver:
  replicas: 1
  service:
    type: LoadBalancer
    ports:
      - name: airflow-ui
        port: 8080

# Scheduler
scheduler:
  replicas: 1

# Workers
workers:
  replicas: 0

# PostgreSQL - use in-cluster postgres for PoC/dev
postgresql:
  enabled: true
  auth:
    postgresPassword: airflow
    username: airflow
    password: airflow

# Persistence for logs and DAGs
persistence:
  enabled: true
  size: 10Gi
  storageClassName: gp2
  logs:
    enabled: true
    size: 5Gi
  dags:
    enabled: true
    size: 2Gi

# Security contexts
securityContext:
  runAsNonRoot: true

# Image configuration
image:
  repository: apache/airflow
  tag: 2.7.3
  pullPolicy: IfNotPresent

# Node affinity / tolerations
affinity: {}
tolerations: []

# Service Account
serviceAccount:
  create: true
  name: "airflow"

# Ingress (disabled by default)
ingress:
  web:
    enabled: false
